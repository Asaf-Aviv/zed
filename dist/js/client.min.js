"use strict";function throttle$(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:500,n=document.querySelector(e);return Rx.Observable.fromEvent(n,t).throttleTime(i).map(function(e){return e})}function debounce$(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:500,n=document.querySelector(e);return Rx.Observable.fromEvent(n,t).debounceTime(i).map(function(e){return e})}function successAlert(e,t,i){iziToast.show({titleColor:"green",iconColor:"green",icon:i,message:e,position:t})}function errorAlert(e,t){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];iziToast.show({titleColor:"red",iconColor:"red",icon:"fa fa-exclamation-triangle",title:"Error: ",message:e,position:t,overlay:i,overlayClose:i})}function fixPopover(){$('[data-trigger="manual"]').click(function(e){$(this).popover("toggle"),e.preventDefault()}).blur(function(){$(this).popover("hide")})}function createLoader(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";$(e).addClass("position-relative").prepend($('<div class="ui active dimmer"></div>').append($('<div class="ui text loader">'+t+"</div>")))}$(function(){var e=this;$(".lazy").Lazy(),fixPopover(),$("#tier-1 table, #tier-2 table, #tier-3 table, #tier-4 table, #tier-5 table, #leaderboard-table").DataTable({iDisplayLength:-1,paging:!1}),$('[data-toggle="tooltip"]').tooltip().click(function(e){e.preventDefault()}),$(".remove-history").click(function(){var t=$(this).siblings(".hist").text();$(this).parent().remove(),$(".history-wrapper").children().length||$("#search-history").remove();var e=Cookies.getJSON("_hist");e.splice(e.findIndex(function(e){return e.startsWith(t+"=")}),1),Cookies.set("_hist",e,{expires:365})}),$("#nav-match-tab").click(function(){$(this).removeClass("animate")}),$("#region-select > div").click(function(e){var t=$(this),i=t.data("region"),n=t.text();$("#selected-region").data("region",i).text(n),$("#regions-wrapper").hide()}),$(".region-select > div").click(function(e){var t=$(this),i=t.data("region"),n=t.text();$(".selected-region").data("region",i).text(n),$(".regions-wrapper").hide()}),$("#summoner-input input").focus(function(){$("#search-history").show()}),$(".summoner-input input").focus(function(){$(".search-history").show()}),$(".summoner-input input").blur(function(){$(".search-history").hide()}),$(document).click(function(e){var t=$(e.target);if(!t.is(".util-box")||!t.parents(".util-box").length){var i=$(".util-box").find(".active");i.length&&i.removeClass("active").addClass("is-closed").parents().removeClass("active")}$("#summoner-input input").is(":focus")||t.is("#search-history")||t.is(".remove-history i")||t.is(".remove-history")||t.parents("#search-history").length||$("#search-history").hide(),t.parents(".actions-toggler").length||$(".actions").hide()}),$(".util-box").click(function(e){e.stopPropagation();var t=$(this),i=$(""+$(this).data("link"));t.find(".badge").text(""),t.siblings(".active").removeClass("active"),t.toggleClass("active"),$(".util-box").children().not(i).removeClass("active"),i.hasClass("active")?i.removeClass("active").addClass("is-closed"):i.addClass("active")}),$(".util-content").click(function(e){e.stopPropagation()}),$("#filter-items input").click(function(){var s=[],a=void 0,c=void 0;$("#filter-items input:checkbox:checked").each(function(){s.push($(this).val())}),s.length?$(".league-item-wrapper > div").map(function(){c=!0,a=$(this).attr("tags").split(" ");var e=!0,t=!1,i=void 0;try{for(var n,o=s[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var r=n.value;if(-1===a.indexOf(r)){c=!1;break}}}catch(e){t=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw i}}c?$(this).show():$(this).hide()}):$(".league-item-wrapper > div").show()}),$("#search-filter input").keyup(function(){var e=$(this).val().toLowerCase();$(".league-item-wrapper > div").each(function(){$(this).data("title").search(e)<0?$(this).hide():$(this).show()})}),$("#overall-wrapper").on("change","#overall-league-select",function(){createLoader("#overall-patch-tables","Loading"),$.ajax({type:"GET",url:"/statistics/overall/"+$(this).val(),success:function(e){$("#overall-wrapper").html(e)}})}),$("#overall-champs").on("change","#overall-table-elo-select",function(){createLoader("#overall-table","Loading"),$.ajax({type:"GET",url:"/statistics/overall/champions/"+$(this).val(),success:function(e){$("#overall-champs").html(e)}})}),$("#spectate").click(function(){var e=$(this),t=e.attr("data-id"),i=e.attr("data-region"),n=e.attr("data-key");$.ajax({type:"post",url:"/spectate/"+t,data:{gameId:t,region:i,key:n},success:function(e){window.open("/spectate/"+e)},error:function(e){alert(e)}})}),$(".delete-post").click(function(){var e=$(this).attr("data-id");$.ajax({type:"DELETE",url:"/post/"+e,success:function(e){window.location.href="/profile"},error:function(e){alert(e)}})}),$(".like-post").click(function(){$this=$(this);var e=$this.data("id"),t=$this.siblings(".like-count").text();$.ajax({type:"POST",url:"/post/like/"+e,success:function(e){$this.children(".like-btn").toggleClass("active"),$this.siblings(".like-count").text(Number(t)+Number(e))},error:function(e){errorAlert(e.responseText,"center")}})}),$(".like-comment").click(function(){$this=$(this);var e=$this.data("parent"),t=$this.data("id"),i=$this.siblings(".like-count").text();$.ajax({type:"POST",url:"/post/comment/like/"+e,data:{commentId:t},success:function(e){$this.children(".like-btn").toggleClass("active"),$this.siblings(".like-count").text(Number(i)+Number(e))},error:function(e){errorAlert(e.responseText,"center")}})}),$(".actions-toggler").click(function(){$(this).find(".actions").toggle()}),$(".action-toggler").blur(function(){$(".actions").hide()}),$(".actions").blur(function(){$(".actions").hide()}),$(".comment-toggler").click(function(){$(this).parent().parent().find(".comment-form").slideToggle().find("textarea").focus()}),$(".toggle-comments").click(function(){$this=$(this),$this.parents(".post-content-wrapper").siblings(".comments").slideToggle()}),$(".comment-form").submit(function(e){e.preventDefault();var t=$(this),i=t.attr("data-id");t.find("button").prop("disabled",!0),$.ajax({type:"POST",data:t.serialize(),url:"/post/comment/"+i,success:function(e){t.find("textarea").val(""),t.parents(".post-content-wrapper").siblings(".comments").append(e).slideDown()},error:function(e){errorAlert(e.responseText,"center"),console.log(e)},complete:function(){t.find("button").prop("disabled",!1)}})}),$(document).on("click",".delete-comment",function(){$this=$(this),$this.prop("disabled",!0);var t=$this.data("id"),i=$this.parents(".comments").children().length;$.ajax({type:"DELETE",url:"/post/comment/"+t,success:function(e){successAlert("Comment deleted","topRight","fa fa-check"),$("#"+t).fadeOut(function(){return $("#"+t).remove()}),$this.parents(".comments").siblings(".post-content-wrapper").find(".comment-count").text(i-1)},error:function(e){alert(e)},complete:function(){return $this.prop("disabled",!1)}})}),$(document).on("click",".send-friend-request",function(){var e=$(this).attr("data-id");$this=$(this),$this.prop("disabled",!0),$.ajax({type:"POST",url:"users/sendFriendRequest/"+e,success:function(e){$("[data-id="+e+"]").replaceWith($("<button>").addClass("btn btn-warning").html("Pending")),$("#"+e).append($("<button>").addClass("btn btn-danger cancel-friend-request").attr("data-id",e).html("cancle")),successAlert("Request sent","topRight","fa fa-user")},error:function(e){errorAlert("Something went wrong :/ Please try again.","center")},complete:function(){return $this.prop("disabled",!1)}})}),$(document).on("click",".accept-friend-request",function(){var t=$(this).data("id");$this=$(this),$this.prop("disabled",!0),$.ajax({type:"POST",url:"users/acceptFriendRequest/"+t,success:function(e){$("#"+t).remove()},error:function(e){alert(e)},complete:function(){return $this.prop("disabled",!1)}})}),$(document).on("click",".decline-friend-request",function(){var e=$(this).attr("data-id");$this=$(this),$this.prop("disabled",!0),$.ajax({type:"POST",url:"users/declineFriendRequest/"+e,success:function(e){$("#"+e).remove()},error:function(e){alert(e)},complete:function(){return $this.prop("disabled",!1)}})}),$(document).on("click",".cancel-friend-request",function(){var e=$(this).attr("data-id");$this=$(this),$this.prop("disabled",!0),$.ajax({type:"POST",url:"users/cancelFriendRequest/"+e,success:function(e){$("#"+e).find("button").remove(),$("#"+e).append($("<button>").addClass("btn btn-success send-friend-request").attr("data-id",e).html("ADD"))},error:function(e){alert(e)},complete:function(){return $this.prop("disabled",!1)}})}),$("#nav-league-tab").one("click",function(){var e=$(this).data("league-id"),t=$(this).data("region");e&&(createLoader("#nav-league"),$.ajax({type:"GET",url:"/league/"+e+"_"+t,success:function(e){$("#nav-league").html(e)},error:function(e){alert(e)},complete:function(){return $(".ui.dimmer.active").remove()}}))}),$("#nav-match-tab").one("click",function(){var e=$(this).data("id"),t=$(this).data("region");createLoader("#nav-match"),$.ajax({type:"GET",url:"/match/"+e+"_"+t,success:function(e){$("#nav-match").html(e),console.log(e)},error:function(){$("#nav-match").html('<div class="not-in-game">Summoner is not in a game</div>')},complete:function(){return $(".ui.dimmer.active").remove()}})}),$("#inbox-controls > div").click(function(e){if($this=$(this),!$this.hasClass("active")){var t=$(this).data("link");$("#inbox-controls .active").removeClass("active"),$this.addClass("active"),$("#inbox-msg-wrapper > div:visible").hide(0,function(){return $("#"+t).fadeIn(200)})}}),$(".message-form").submit(function(e){e.preventDefault(),$this=$(this);var t=$this.data("id");console.log($this),$.ajax({type:"POST",data:$(this).serialize(),url:"/message/"+t,success:function(e){successAlert("success","center","fa fa-comment"),$this[0].reset()},error:function(e){errorAlert(e.responseText,"center")},complete:function(){}})}),$(".reply-msg").click(function(){console.log("clicked");var e=$(this).data("id"),t=$(this).data("username");console.log(e,t),$(this).closest("#reply-"+e).addClass("show")}),$(".bookmark-msg").click(function(){var t=$(this).data("id"),i=$("#"+t);i.find(".bookmark-msg").toggleClass("active"),$.ajax({type:"PATCH",url:"/message/bookmark/"+t,success:function(e){e?i.clone(!0,!0).appendTo("#inbox-bookmark"):$("#inbox-bookmark #"+t).fadeOut(100)},error:function(e){i.find(".bookmark-msg").toggleClass("active"),errorAlert(e.responseText,"center")}})}),$(".delete-msg").click(function(){var t=$(this).data("id");$.ajax({type:"DELETE",url:"/message/"+t,success:function(e){$("#"+t).remove(),$("#"+t).remove()},error:function(e){errorAlert(e.responseText,"center")},complete:function(){}})}),$(".report-msg").click(function(){console.log("clicked");var e=$(this).data("id");console.log(e)}),$("#info-form").submit(function(e){e.preventDefault(),$.ajax({type:"PUT",url:"/profile/info",data:$(this).serialize(),success:function(){successAlert("center","fa fa-thumps-up")},error:function(){errorAlert("Something went wrong :/ Please try again.","center")},complete:function(){}})}),$("#contact-form").submit(function(e){e.preventDefault(),$("#contact-form button").prop("disabled",!0),$.ajax({type:"POST",url:"/contact",data:$("#contact-form").serialize(),success:function(e){successAlert(e,"center","fa fa-thumps-up")},error:function(e){errorAlert("Something went wrong :/ Please try again.","center")},complete:function(){$("#contact-form button").prop("disabled",!1)}})}),$("#feedback-form").submit(function(e){e.preventDefault(),$("#feedback-form button").prop("disabled",!0),$.ajax({type:"POST",url:"/feedback",data:$("#feedback-form").serialize(),success:function(e){successAlert(e,"topRight","fa fa-thumps-up")},error:function(e){errorAlert("Something went wrong :/ Please try again.","center")},complete:function(){$("#feedback-form button").prop("disabled",!1)}})}),$(".remove-feedback").click(function(){$("#feedback-wrapper, .feedback-btns").remove()}),$(".feedback-btn, .close-feedback").click(function(){$("#feedback-wrapper").toggleClass("d-none"),$("#feedback-form textarea").focus()}),$("#selected-region").click(function(){$("#regions-wrapper").toggle()}),$(".selected-region").click(function(){$(".regions-wrapper").toggle()}),$("#scroll-top").click(function(){setTimeout(function(){return $("#scroll-top").css({display:"none"})},200),$("html, body").animate({scrollTop:0},200,"easeOutCubic")}),$("#summoner-input input").keypress(function(e){13===e.keyCode&&$("#summoner-search-btn").click()}),$(".summoner-input input").keypress(function(e){13===e.keyCode&&$(".summoner-search-btn").click()}),throttle$("#summoner-search-btn","click",400).subscribe(function(){var e=$("#summoner-input input").val().replace(/ /g,"+"),t=$("#selected-region").data("region");if(e.length<3)return errorAlert("Summoner name must be at least 3 characters long.","topCenter",!1);$("#summoner-search-btn").prop("disabled",!0),window.location.href="/summoner?region="+t+"&userName="+e}),throttle$(".summoner-search-btn","click",400).subscribe(function(){var e=$(".summoner-input input").val().replace(/ /g,"+"),t=$(".selected-region").data("region");if(e.length<3)return errorAlert("Summoner name must be at least 3 characters long.","topCenter",!1);$(".summoner-search-btn").prop("disabled",!0),window.location.href="/summoner?region="+t+"&userName="+e}),Rx.Observable.fromEvent(document,"scroll").throttleTime(300).subscribe(function(){800<$(e).scrollTop()?$("#scroll-top").css({display:"block"}):$("#scroll-top").css({display:"none"})})}),iziToast.settings({class:"izi-alert",titleSize:"18px",titleColor:"#b1a0ff",messageSize:"15px",messageColor:"#b1a0ff",iconColor:"#b1a0ff",backgroundColor:"rgba(44,44,44,0.7)",progressBarColor:"#b1a0ff",close:!0,position:"topRight",titleLineHeight:"1.2",messageLineHeight:"1.5"}),$.each($("textarea[data-autoresize]"),function(){var t=this.offsetHeight-this.clientHeight;$(this).on("keyup input",function(){var e;e=this,$(e).css("height","auto").css("height",e.scrollHeight+t+2)}).removeAttr("data-autoresize")});var socket=io();function notificationHandler(e,t,i){var n=$(e).find(".badge:first").text();$(e).find(".badge:first").text(n.toString().length<3?++n:"99+"),$(e+" i:first-child").addClass(t),setTimeout(function(){return $(e+" i:first-child").removeClass(t)},i)}function createNotification(e,t){var i='\n        <div class="notify-wrapper">\n            <div class="notify-time">\n                <span>a few seconds ago</span>\n            </div>\n            <div class="notify-body">\n                '+t+"\n            </div>\n        </div>\n    ";$(e+" .notify-content").prepend(i)}socket.on("friendRequest",function(e){notificationHandler("#friend-requests","flash",1e3),createNotification("#friend-requests-nav",'<a class="notify-link" href="/users/'+e+'">'+e+"</a> sent you a friend request!"),successAlert('<a href="/users/'+e+'">'+e+"</a> sent you a friend request","topRight","fa fa-user")}),socket.on("likePost",function(e){notificationHandler("#notifications","ring",1500),createNotification("#notifications-nav",'<a class="notify-link" href="/users/'+e+'">'+e+"</a> liked your post!"),successAlert('<a href="/users/'+e+'">'+e+"</a> liked your post!","topRight","fa fa-thumbs-up")}),socket.on("likeComment",function(e){notificationHandler("#notifications","ring",1500),createNotification("#notifications-nav",'<a class="notify-link" href="/users/'+e+'">'+e+"</a> liked your comment!"),successAlert('<a href="/users/'+e+'">'+e+"</a> liked your comment!","topRight","fa fa-thumbs-up")}),socket.on("comment",function(e){notificationHandler("#notifications","ring",1500),createNotification("#notifications-nav",'<a class="notify-link" href="/users/'+e+'">'+e+"</a> commented on your post!"),successAlert('<a href="/users/'+e+'">'+e+"</a> just commented on your post!","topRight","fa fa-comment")}),socket.on("acceptFriendRequest",function(e){console.log("accepted"),notificationHandler("#notifications","ring",1500),createNotification("#notifications-nav",'You and <a class="notify-link" href="/users/'+e+'">'+e+"</a> are now friends!"),successAlert('You and <a href="/users/'+e+'">'+e+"</a> are now friends!","topRight","fa fa-check")}),socket.on("newMessage",function(e){notificationHandler("#messages","rubberBand",1e3),createNotification("#messages-nav",'<a class="notify-link" href="/users/'+e+'">'+e+"</a> sent you a message!"),successAlert(e+" just sent you a message!","topRight","fa fa-envelope")});